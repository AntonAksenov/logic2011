\section{1я и 2я теоремы Геделя о неполноте арифметики}

\begin{definition}Мы будем называть теорию непротиворечивой, если
не найдется такой формулы $\alpha$, что доказуемо как $\alpha$, так и $\neg \alpha$.
\end{definition}

\begin{lemma}
Если теория противоречива, то в ней доказуема любая формула.
\end{lemma}
\begin{proof}
Если теория противоречива, то в ней есть утверждение $\alpha$, что доказуемо $\alpha$ и $\neg \alpha$.
Воспользуемся общезначимой (и потому доказуемой) формулой исчисления высказываний 
$\alpha \rightarrow \neg \alpha \rightarrow \beta$.
\end{proof}

\begin{definition}Мы будем называть теорию $\omega$-непротиворечивой,
если, какова бы ни была формула $P(x)$ со свободной переменной $x$, 
такая, что для любого натурального числа $p$ доказуемо $P(\overline{p})$, 
то формула $\exists p \neg P(p)$ недоказуема.
\end{definition}

\begin{lemma}
$\omega$-непротиворечивость влечёт непротиворечивость.
\end{lemma}

\begin{proof}
Рассмотрим выводимую формулу $x=x \rightarrow x=x$.
При подстановке любого натурального числа вместо $x$
формула будет по-прежнему выводима: $\overline{k} = \overline{k} \rightarrow \overline{k}=\overline{k}$.
Значит, по $\omega$-непротиворечивости формула $\exists p \neg (x=x \rightarrow x=x)$ невыводима.
Значит, теория непротиворечива (поскольку в противоречивой теории выводится любая формула).
\end{proof}

Определим рекурсивное отношение $W_1(x,p)$,
истинное тогда и только тогда, когда $x$ есть гёделев номер формулы
$\phi$ с единственным свободным аргументом $x$, а $p$ есть гёделев номер 
доказательства $\phi(\gq{\phi})$ --- доказательства 
самоприменения $\phi$. 
Это соотношение является выразимым в формальной арифметике с помощью следующей формулы:
$$\omega_1(x,p) \equiv Free(x,\gq{x}) \& Proof (Sub(x,\gq{x},Num(x)),p)$$

Рассмотрим формулу $\sigma \equiv \forall p \neg \omega_1(x,p)$ --- это некоторая формула
с единственной свободной переменной $x$ --- и посмотрим, что произойдёт с её самоприменением:
$\sigma(\overline{\gq\sigma})$. Внимательное наблюдение за
происходящим даст следующую теорему.

\begin{theorem}{Первая теорема Гёделя о неполноте арифметики.}

1. Если формальная арифметика непротиворечива, то недоказуемо $\sigma(\overline{\gq\sigma})$.

2. Если формальная арифметика $\omega$-непротиворечива, то недоказуемо $\neg \sigma(\overline{\gq\sigma})$.
\end{theorem}

\begin{proof}
1. Пусть $\vdash \sigma(\overline{\gq\sigma})$. Тогда найдется гёделев номер ее 
доказательства $p$, значит, $W_1(\gq\sigma,p)$, то есть $\vdash \omega_1 (\overline{\gq\sigma},\overline{p})$. 
С другой стороны, пользуясь схемой аксиом для квантора всеобщности и правилом Modus Ponens, из 
предположения теоремы $\vdash \sigma(\overline{\gq\sigma})$ 
(то есть $\vdash \forall p \neg \omega_1(\overline{\gq\sigma},p)$)
можно показать $\vdash \neg \omega_1(\overline{\gq\sigma},\overline{p})$. 
Противоречие.

2. Пусть $\vdash \neg \sigma(\overline{\gq\sigma})$, то есть 
$\vdash \neg \forall p \neg \omega_1(\overline{\gq\sigma},p)$,
то есть $\vdash \exists p \omega_1(\overline{\gq\sigma},p)$.
Значит, неизбежно найдется такой номер $q$, что
$\vdash \omega_1 (\overline{\gq\sigma},\overline{q})$, поскольку 
если бы для каждого $q$ было бы доказуемо $\vdash \neg \omega_1 (\overline{\gq\sigma},\overline{q})$,
то по $\omega$-непротиворечивости было бы недоказуемо
$\exists p \neg\neg \omega_1(\overline{\gq\sigma},p)$.

Рассмотрев же определение $W_1$, можно заметить, что найденный $q$ также есть
номер доказательства $\sigma(\overline{\gq\sigma})$, что
вступает в противоречие с предположением $\vdash \neg \sigma(\overline{\gq\sigma})$.
\end{proof}

Формула $\sigma(\overline{\gq\sigma})$, говоря простым языком, утверждает 
собственную недоказуемость. Мы показали, что эта формула (при условии 
$\omega$-непротиворечивости формальной арифметики) действительно 
недоказуема --- что означает её общезначимость. Таким образом, мы 
показали, что если формальная арифметика $\omega$-непротиворечива, 
то она неполна.

В данном рассуждении используется сложное понятие
$\omega$-непротиворечивости, что смущает. Теорема Гёделя в форме 
Россера снимает эту сложность.

Рассмотрим отношение $W_2 (x,p)$ --- $x$ и $p$ состоят в отношении $W_2$ тогда и только тогда, когда
$p$ - гёделев номер доказательства \emph{отрицания} самоприменения $x$ (если $\phi$ --- формула от
одной переменной $x$, то $p$ --- номер доказательства $\neg \phi(\overline{\gq\phi})$). 
Мы также можем выразить его в формальной арифметике аналогично $\omega_1$
(обозначим выражающую формулу за $\omega_2$).

Тогда рассмотрим формулу $\rho(x) \equiv \forall p (\omega_1 (x,p) \rightarrow \exists q (q < p \& \omega_2 (x,q)))$.
Неформальным языком она утверждает, что для любого доказательства самоприменения некоторой 
формулы с номером $a$ найдется доказательство (да еще и с меньшим гёделевым номером) 
отрицания этой формулы. Ну и по традиции применим ее к своему номеру $r$. 
Внимательное рассмотрение этой ситуации приводит к следующей теореме.

\begin{theorem}{Теорема Гёделя в форме Россера.}
Если формальная арифметика непротиворечива, то 
найдется такая формула $\phi$, что как она сама, так и ее отрицание
недоказуемы.
\end{theorem}

\begin{proof}
В качестве формулы $\phi$ возьмем формулу $\rho(\overline{\gq\rho})$.

Покажем недоказуемость $\phi$. Пусть $\vdash \rho(\overline{\gq\rho})$, т.е. 
$\vdash \forall p (\omega_1 (\overline{\gq\rho},p) \rightarrow \exists q (q < p \& \omega_2 (\overline{\gq\rho},q)))$.
У этого доказательства есть некоторый номер $t$, причем $\omega_1 (\overline{\gq\rho},\overline{t})$.
Несложно показать $\vdash (\omega_1 (\overline{\gq\rho},\overline{t}) \rightarrow \exists q (q < \overline{t} \& \omega_2 (\overline{\gq\rho},q)))$.
По построению формулы $\vdash \omega_1 (\overline{\gq\rho},\overline{t})$, откуда, соединив
доказательства воедино, и применив правило Modus Ponens, получим 
$\vdash \exists q (q < \overline{t} \& \omega_2 (\overline{\gq\rho},q)))$.

Дальше заметим:
\begin{tabular}{lll}
$1..k$ & $\neg (q < \overline{t} \& omega_2 (\ogq\rho,q)) \rightarrow \exists \neg (q < \overline{t} \& omega_2 (\ogq\rho,q))$ &\\
$k+1..l$ & $\neg (q < \overline{t} \& omega_2 (\ogq\rho,q)) \rightarrow \exists (q < \overline{t} \& omega_2 (\ogq\rho,q))$ &\\
$l+1..m$ & $\neg\neg (q < \overline{t} \& omega_2 (\ogq\rho,q))$ & \\
\end{tabular}

Значит, есть такой $p$, что $\exists q (y < q \& \omega_2 (\overline{\gq\rho},q))$ истинно.
Значит, найдется такой $q < p$, что $W_2 (\gq\rho,q)$ истинно, т.е., что 
$q$ --- номер опровержения $\phi$, что влечёт за собой противоречивость арифметики.

Обратно, пусть $\vdash \neg \phi$. Пусть $t$ - гёделев номер доказательства.
Раз так, то $W_2 (\gq\rho,t)$ истинно. По непротиворечивости формальной арифметики
это значит, что $W_1 (\gq\rho,p)$ при любом $p$ ложно (иначе окажется, что 
найдутся как доказательство, так и опровержение $\rho(\overline{\gq\rho})$). 
Значит, доказуемо $\neg \omega_1 (\overline{\gq\rho},\overline{p})$ при 
любом $p$ (т.е. никакой из $p$ не является доказательством $\rho(\overline{\gq\rho})$). 
Как частный случай, $\neg \omega_1 (\overline{\gq\rho},\overline{x})$ доказуемо для
всех $x$, не превышающих $t$, поэтому 
$\vdash \neg \omega_1 (\overline{\gq\rho},\overline{0}) \& \neg \omega_1 (\overline{\gq\rho},\overline{1}) \& ... \& \neg \omega_1 (\overline{\gq\rho},\overline{t})$.
Отсюда можно показать $\vdash p \le \overline{t} \rightarrow \neg \omega_1 (\overline{\gq\rho},p)$.

Рассмотрим формулу $(p > \overline{t}) \rightarrow \exists q (q < p \& \omega_2 (\overline{\gq\rho},q))$
Формула утверждает следующее: <<если некоторый $p$ больше $t$, то найдется
такой $q$, меньший $p$, что $W_2 (\gq\rho,q)$>>. Очевидно, что данная формула истинна,
ведь если мы возьмем $t$ в качестве такого $q$, то $W_2 (\gq\rho,t)$ истинно 
по предположению. В силу выразимости $W_2$ в формальной арифметике формула также и доказуема.

Легко показать, что из этих утверждений и из того, что $p \le \overline{t} \vee p > \overline{t}$,
можно вывести $\neg \omega_1 (\overline{\gq\rho},p) \vee \exists q (q < p \& \omega_2 (\overline{\gq\rho},p))$,
а отсюда - $\forall p (\omega_1 (\overline{\gq\rho},p) \rightarrow \exists q (q < p \& \omega_2 (\overline{\gq\rho},q)))$,
то есть $\phi$. Однако, мы предположили доказуемость $\neg \phi$, и исходя из него,
вывели $\phi$, т.е. показали противоречивость формальной арифметики. Значит, 
$\neg \phi$ также недоказуемо, если арифметика непротиворечива.
\end{proof}

Выберем утверждение, которое показывает непротиворечивость арифметики, т.е. 
показывает отсутствие такой формулы $\phi$, что и $\phi$ и $\neg \phi$ доказуемы.
Поскольку в противоречивой теории можно вывести любое утверждение, нам
достаточно проверить это для какого-то конкретного $\phi$, пусть это будет
$1=0$. Ясно, что $\neg 1=0$ доказуемо.
 Тогда для доказательства непротиворечивости арифметики нам достаточно
доказать $\forall p (\neg Proof (\overline{\gq{1=0}}, p))$. Обозначим это утверждение
за $Consis$.

\begin{theorem}{Вторая теорема Гёделя о неполноте арифметики.}
Если арифметика непротиворечива, то в ней не существует доказательства $Consis$.
\end{theorem}

\begin{proof}
Рассмотрим формулу $Consis \rightarrow \sigma(\overline{\gq\sigma})$.
Данная формула в точности соответствует условию первой части первой теоремы Гёделя 
о неполноте арифметики: 
если арифметика непротиворечива, то самоприменение формулы $\sigma$ истинно, т.е.
недоказуемо; напомним, что $\sigma(x) \equiv \forall p \neg \omega_1 (x,p)$.

Рассуждение, доказывающее теорему Гёделя, можно формализовать, получив доказательство
данной импликации. Теперь, если у нас будет доказательство утверждения $Consis$,
то по правилу Modus Ponens мы также получаем доказательство утверждения 
$\sigma (\gq\sigma)$, что невозможно по первой теореме Гёделя.
\end{proof}

В данном месте есть очень поучительный пример, показывающий важность 
формализации, и существенность деталей, которые мы опустили в доказательстве
второй теоремы о неполноте. В самом деле, вместо формулы $Consis$ мы могли бы 
попробовать рассмотреть формулу 
$Proof1(a) := Proof (a,x) \& \neg(Proof (\gq{1=0},x))$
и построить по ней формулу
$Consis1 := \forall x \neg Proof1 (\gq{1=0},x)$ 
На первый взгляд, замена равноценна: действительно, 
если арифметика непротиворечива, то тогда $Proof1$ ничем не отличается от $Proof$,
поскольку $1=0$ тогда действительно недоказуема. Если же арифметика противоречива,
то $Consis1$ доказуема, как и любая другая формула.

Однако, $Consis1$ легко доказать. Пусть $\pi(x) \equiv Proof(\gq{0=1},x)$, тогда:

\begin{tabular}{lll}
(1..n) & $\neg (\pi(x) \& \neg (\pi(x)))$ & Доказуемо в и.в.\\
(n+1) & $\neg a=0$ & Аксиома А.x\\
(n+2) & $\neg (\pi(x) \& \neg (\pi(x))) \rightarrow \neg a=0 \rightarrow \neg (\pi(x) \& \neg (\pi(x)))$ & Сх. акс. 1\\
(n+3) & $\neg a=0 \rightarrow \neg (\pi(x) \& \neg (\pi(x)))$ & M.P. $n$,$n+2$\\
(n+4) & $\neg a=0 \rightarrow \forall x \neg (\pi(x) \& \neg (\pi(x)))$ & Введение $\forall$ к $n+3$\\
(n+5) & $\forall x \neg (\pi(x) \& \neg \pi(x))$ & M.P. $n+1$, $n+4$
\end{tabular}

Получается, что мы здесь, продолжив рассуждение в соответствии со второй теоремой,
можем сразу получить противоречие и показать противоречивость арифметики?
На самом деле нет, поскольку мы некритично обобщили вторую теорему на 
случай формулы $Consis1$, тогда как она существенно использует внутреннее устройство $Consis$. 
У $Consis1$ ведь есть <<слепое пятно>> --- формула $1=0$, на которой его результат не вычисляется,
а постулируется, и это значительное отличие. 

Чтобы абстрагироваться от конкретного вида $Consis$, Гильбертом и Бернайсом были
предложены следующие условия выводимости, позволяющие считать, что формула действительно
выражает непротиворечивость арифметики. Мы приведем их в более позднем варианте,
сформулированном Лёфом.

Пусть $Consis \equiv \neg Provable (\gq{1=0})$. Тогда $Provable$ должно отвечать следующим
свойствам:

\begin{enumerate}
\item $\vdash \alpha$ влечет $\vdash Provable(\gq{\alpha})$
\item $\vdash Provable (\gq{\alpha}) \rightarrow Provable(\gq{Provable(\gq{\alpha})})$
\item $\vdash Provable (\gq{\alpha\rightarrow \beta})\rightarrow Provable(\gq{\alpha}) \rightarrow Provable(\gq{\beta})$
\end{enumerate}

Заметим, что в случае $Provable1(a) = \exists x (Proof (a,x) \& \neg Proof (\gq{1=0},x))$
у нас будут сложности с демонстрацией третьего правила. 
Анализ таблицы истинности импликации (вместе с полнотой и.в.)
указывает, что чтобы показать 
$$\vdash Provable1 (\gq{2=0\rightarrow 1=0}) \rightarrow Provable1 (\gq{2=0}) \rightarrow Provable1 (\gq{1=0})$$
нам надо показать $\vdash \neg Provable1 (\gq{2=0})$,
поскольку $\vdash Provable1 (\gq{2=0\rightarrow 1=0})$ и $\vdash \neg Provable1 (\gq{1=0})$. 
То есть, мы получим эту импликацию, только если покажем доказуемость непротиворечивости формальной арифметики
(ведь $\vdash \neg Provable1 (\gq{2=0})$ --- это тоже вариант $Consis$).

Если бы речь шла об обычной формуле $Provable$, мы бы решили вопрос следующим неформальным, но формализуемым
доказательством:
если существует $x$, такой, что $Proof (\gq{2=0},x)$, 
и существует $y$, что $Proof(\gq{2=0\rightarrow 1=0},y)$, 
то выполнено и $Proof (\gq{1=0},x @ y @ \gq{1=0})$.

%\begin{tabular}{lll}
%(1) & $\exists x Proof(\gq{2=0},x)$ & Предположение 1\\
%(2) & $\exists y Proof(\gq{2=0\rightarrow 1=0},y)$ & Предположение 2\\
%(3..p) & $\exists x \exists y (Proof (\gq{2=0},x) \& Proof(\gq{2=0\rightarrow 1=0},y))$ & Доказуемо\\
%(..) & Конкретное доказательство не привести, но оно существует по свойствам $Proof$ &\\
%(p+1..k) & $ \exists x \exists y (Proof (\gq{2=0},x) \& Proof(\gq{2=0\rightarrow 1=0},y) \rightarrow Proof (\gq{1=0}, x @ y @ \gq{1=0}))$\\
%(k+1..l) & $ \exists x \exists y (Proof (\gq{2=0},x) \& Proof(\gq{2=0\rightarrow 1=0},y) \rightarrow \exists p Proof (\gq{1=0}, p))$\\
%(l+1..m) & $ \exists x \exists y (\exists p Proof (\gq{1=0}, p))$\\
%\end{tabular}

В случае же с $Provable1$ нам все равно необходимо показывать $\vdash \neg Provable1 (\gq{1=0})$.

Мы можем, конечно, указать общее соображение: если бы было верно $Provable1 (\gq{2=0})$, то 
тогда было бы верно $\vdash 2=0$, значит, теория противоречива и найдется доказательство чего угодно, 
в том числе и $\vdash Provable1 (\gq{1=0})$, значит, выполнено $\neg Provable1 (\gq{2=0})$.
Но это рассуждение касается только значений формулы $Provable1$, сформулировано на мета-языке, 
и непонятно, как из него сделать формальное доказательство $\vdash \neg Provable1 (\gq{2=0})$.

