\section{Общие замечания}

Данный текст представляет из себя краткий конспект лекций по курсу
<<Математическая логика>>, рассказанных студентам ИТМО (группы 2538 и 2539)
в 2011-2012 учебном году.

\section{Язык исчисления высказываний}

\begin{definition} Языком исчисления высказываний мы назовем язык $L$,
порождаемый следующей грамматикой со стартовым нетерминалом \s{<выражение>}:

\begin{bnf}\begin{eqnarray*}
\s{<выражение>}&::=&\s{<импликация>}\\
\s{<импликация>}&::=&\s{<дизъюнкция>} | \s{<дизъюнкция>} \rightarrow \s{<импликация>}\\
\s{<дизъюнкция>}&::=&\s{<конъюнкция>} | \s{<дизъюнкция>} \vee \s{<конъюнкция>}\\
\s{<конъюнкция>}&::=&\s{<терм>} | \s{<конъюнкция>} \& \s{<терм>}\\
\s{<терм>}&::=&\s{<пропозициональная переменная>} | (\s{<выражение>}) | \neg \s{<терм>}
\end{eqnarray*}\end{bnf}
\end{definition}

Нетерминал \s{<пропозициональная переменная>} формально определять не будем,
хотя это можно также сделать ценой небольшого технического усложнения.
Договоримся, что такие переменные --- это большие буквы латинского алфавита,
возможно, имеющие нижний индекс.

Так построенная грамматика предписывает определенный способ расстановки
опущенных скобок, при этом скобки у конъюнкции и дизъюнкции расставляются
слева направо, а у импликации --- справа налево (это соответствует традиционному
чтению), так что выражение $A \rightarrow B\&C\&D \rightarrow E$ следует
понимать как $A \rightarrow (((B\&C)\&D) \rightarrow E)$. Все выражения,
которые отличаются только наличием дополнительных незначащих скобок
(не изменяющих порядок операций), мы будем считать одинаковыми.

В случаях, когда это будет существенно, мы будем дополнительно ограничивать 
свободу расстановки скобок, требуя указывать скобки для всех двуместных
операций:

\begin{bnf}\begin{eqnarray*}
\s{<выражение>}&::=&\s{<импликация>}\\
\s{<импликация>}&::=&\s{<дизъюнкция>} | (\s{<дизъюнкция>} \rightarrow \s{<импликация>})\\
\s{<дизъюнкция>}&::=&\s{<конъюнкция>} | (\s{<дизъюнкция>} \vee \s{<конъюнкция>})\\
\s{<конъюнкция>}&::=&\s{<терм>} | (\s{<конъюнкция>} \& \s{<терм>})\\
\s{<терм>}&::=&\s{<пропозициональная переменная>} | \s{<выражение>} | \neg \s{<терм>}
\end{eqnarray*}\end{bnf}

Обратите внимание, в такой грамматике каждая двуместная операция указывается вместе со 
скобками, и при этом <<незначащие>> скобки запрещены. Поэтому здесь есть только один способ
записать данное выражение.

Все формулы, порождаемые данными грамматиками, мы будем называть \emph{высказываниями}
(также формулами или выражениями исчисления высказываний). Высказывания, подробности
которых нас не интересуют, мы будем обозначать начальными буквами греческого алфавита
($\alpha$, $\beta$, $\gamma$ и т.п.).

%Легко заметить, что если мы сейчас возьмем в качестве аксиом список 
%из правил вывода, а в качестве правила перехода -- ${(A, A \rightarrow B, B)}$, 
%то ничего разумного не получится. В самом деле, даже выражения 
%$A \rightarrow (A \rightarrow A)$ нам не доказать, потому что это
%выражение не совпадает ни с одной из аксиом и не является заключением
%единственного правила перехода.
%
%Традиционное решение здесь простое: в множество аксиом мы должны добавить 
%все возможные результаты подстановки формул
%вместо пропозициональных переменных. Такой же прием следует применить и
%к правилам перехода. Тогда, если мы все правильно сделаем, то среди аксиом будет
%содержаться и аксиома $A \rightarrow (A \rightarrow A)$ (как результат
%подстановки $A := A$, $B := A$).
%
%Формализуем этот подход. Добавим к грамматике для языка $L$ три правила,
%которые дадут язык $L_\Gamma$:
%
%\begin{bnf}\begin{eqnarray*}
%\s{<выражение>}&::=&$\psi$\\
%\s{<выражение>}&::=&$\phi$\\
%\s{<выражение>}&::=&$\pi$
%\end{eqnarray*}\end{bnf}
%
%Тогда формулу из языка $L_\Gamma \backslash L$ мы назовем \emph{схемой высказывания}.
%Каждая схема естественным образом задает список аксиом, этому списку 
%принадлежат все выражения, которые получаются при замене греческих букв 
%$\psi, \phi, \pi$ на выражения из $L$. 
%
%Соответственно, аксиомами исчисления высказываний мы назовем все аксиомы,
%которые получаются из следующих схем высказываний (или, чтобы выражаться
%короче, мы будем говорить о списке \emph{схем аксиом}):
%\begin{enumerate}
%\item $(\pi) \rightarrow ((\phi) \rightarrow (\pi))$
%\item $((\pi) \rightarrow (\phi)) 
%  \rightarrow (((\pi) \rightarrow ((\phi) \rigtharrow (\psi)))
%  \rightarrow ((\phi) \rightarrow (\psi))$
%\end{enumerate}
%Обозначим полученное множество за $A$.
%
%Аналогично мы можем определить правило вывода --- как упорядоченную $n$-ку
%схем, которая задает список всевозможных $n$-ок, получающихся при 
%\emph{согласованной} подстановке формул вместо греческих букв. Под 
%согласованной подстановкой мы понимаем подстановку, в которой одинаковые 
%греческие буквы во всех схемах данной $n$-ки раскрываются одинаково. 
%Обозначим итог подобной подстановки за $R$.

%Прежде чем закончить определение исчисления высказываний, мы должны сделать
%дополнение насчет равенства формул: мы будем считать, что две формулы
%исчисления одинаковы, если их деревья разбора одинаковы после исключения
%из дерева всех узлов, соответствующих применению правила

%\begin{bnf}\begin{eqnarray*}
%\s{<выражение>}&::=&\s{(<выражение>)}
%\end{eqnarray*}\end{bnf}

%\begin{definition} \emph{Исчислением высказываний} мы назовем формальную
%систему, в которой в качестве языка используется язык $L$, в качестве
%множества аксиом -- множество $A$, в качетве правил вывода -- множество $R$.
%\end{definition}

%Теперь мы можем видеть, что $A \rightarrow (A \rightarrow A)$ -- это
%аксиома: достаточно рассмотреть схему аксиом 1 и подставить
%$A$ вместо $\pi$ и $\phi$. Получающаяся формула будет отличаться от исходной
%только дополнительными незначащими скобками.

Теперь попробуем научиться вычислять значение высказываний.
Зададим некоторое множество истинностных значений $V$ и функции
оценки $f_\&, f_\vee, f_\to: V \times V \to V$, и $f_\neg: V \to V$, 
по функции на каждую из связок и на отрицание. Также зададим \emph{оценку}
переменных, функцию, сопоставляющую множеству переменных $P$ некоторого 
высказывания $\alpha$ --- функцию $f_P: P \to V$.

\begin{definition}
Если дано некоторое высказывание $\alpha$, в котором используются пропозициональные
переменные $v_1 \dots v_n$, то \emph{оценку} данного высказывания $|\alpha|$ мы определим 
следующим рекурсивным образом.

Возьмем дерево разбора высказывания, и возьмем его корень. В зависимости
от правила, по которому получен корень, результатом оценки мы назовем:
\begin{itemize}
\item пропозициональная переменная $v_i$: $f_P (v_i)$
\item конъюнкция выражений $\alpha$ и $\beta$: $f_\& (|\alpha|,|\beta|)$
\item дизъюнкция выражений $\alpha$ и $\beta$: $f_\vee (|\alpha|,|\beta|)$
\item импликация выражений $\alpha$ и $\beta$: $f_\to (|\alpha|,|\beta|)$
\item отрицание выражения $\alpha$: $f_\neg (|\alpha|)$
\item во всех остальных случаях оценка выражения равна оценке потомка в дереве.
\end{itemize}
\end{definition}

\begin{theorem}Данное определение позволяет оценить любое выражение.\end{theorem}

\begin{proof}Утверждение очевидно, но для демонстрации техники стоит доказать.

Докажем индукцией по длине формулы, $n$; это традиционный способ доказательств
различных фактов про выражения. Данное доказательство подходит для первого
варианта грамматики.

База: $n=1$. Анализ грамматики показывает, что такая строка может состоять только
из имени пропозициональной переменной. Очевидно, что указанный способ оценки
позволяет такую строку оценить всегда.

Переход: пусть $n\ge 1$ и для $n$ все доказано. Рассмотрим строку длины $n+1$.
В дереве разбора данной строки есть некоторый корень, рассмотрим его. Он может быть:
\begin{itemize}
\item термом --- при этом это не пропозициональная переменная, так как длина строки больше 1.
Значит, это либо выражение в скобках --- тогда все доказано по предположению
индукции, поскольку длина выражения в скобках --- $n-1$, либо отрицание.
Тогда применение функции $f_\neg$ к оценке строки длины $n$ даст оценку выражения.
\item импликацией, конъюнкцией или дизъюнкцией, при этом примененный вариант
правила добавляет новые терминальные символы в строку.
Значит, здесь дерево разбора разделит строку на две, причем длины строго меньшей, 
чем $n$. В этом случае очевидно, что значение выражения будет вычислено.
\item выражением, импликацией, конъюнкцией или дизъюнкцией, при этом примененный вариант 
правила не добавляет новых терминальных символов. В этом случае, спустившись (возможно,
несколько раз) вниз по дереву мы дойдем либо до терма, либо до вариантов правил
для импликации, конъюнкции или дизъюнкции, добавляющих терминальные символы,
и окажемся в условиях предыдущих пунктов.
\end{itemize}
\end{proof}

Зафиксируем множество истинностных значений $V$. Для дальнейшего изложения в качестве 
множества $V$ нам будет достаточно взять \{И,Л\} (\emph{И} обозначает истину, 
\emph{Л} обозначет ложь). 

Также зафиксируем функции оценки для связок и отрицания (они вполне традиционны,
для примера приведем таблицу истинности для импликации).

\begin{tabular}{lll}
$\alpha$ & $\beta$ & $\alpha \rightarrow \beta$ \\
\hline
Л & Л & И \\
Л & И & И \\
И & Л & Л \\
И & И & И
\end{tabular}

Отметим, что хоть данные определения в целом повторяют традиционные,
они построены таким образом, чтобы допускать различные обобщения в случае 
необходимости. Мы будем время от времени этой возможностью пользоваться.

Также заметим, что единственный произвол в оценке выражения связан с выбором
оценки для пропозициональных переменных $f_P$. 

\begin{definition}
Назовем высказывание \s{общезначимым}, если его оценка истинна при любой
оценке входящих в него пропозициональных переменных. На языке исследователя
будем также записывать это так: $\models \alpha$.
\end{definition}

\section{Формальная система и исчисление высказываний}

%Собственно формальную сторону матлогики мы начнем с изучения одного
%из ее простейших разделов -- исчисления высказываний.

\begin{definition} \emph{Формальная система} -- это упорядоченная тройка
$\langle{}L,A,R\rangle$, где $L$ -- некоторый язык, $A \subset L$ -- множество
\emph{аксиом}, а $R \subset (L^2 \cup L^3 \cup L^4 \cup \dots) $ -- 
множество \emph{правил вывода}.
\end{definition}

Поясним определение. Множество $L$ содержит все выражения, которые
мы считаем допустимыми (корректно сформированными). Множество аксиом $A$ ---
это некоторые корректно сформированные выражения, которые мы принимаем
без доказательства. Правила вывода (элементы $R$) -- это некоторые 
упорядоченные $n$-ки ($n \ge 2$) выражений, где первые $n-1$ выражений 
называются \emph{посылками} рассматриваемого правила, а последнее 
выражение --- \emph{заключением} правила.

\begin{definition} \emph{Доказательство} в формальной системе $\langle{}L,A,R\rangle$ --- 
это некоторая конечная последовательность выражений 
$\alpha_1$, $\alpha_2$ \dots $\alpha_n$
из языка $L$, такая, что каждое из утверждений $\alpha_i (1 \le i \le n)$
либо является аксиомой (т.е. $\alpha_i \in A$), либо получается из других
утверждений $\alpha_{P_1}$, $\alpha_{P_2}$ \dots $\alpha_{P_k}$ 
($P_1 \dots P_k < i$) с использованием какого-нибудь правила вывода:
$(\alpha_{P_1}, \alpha_{P_2} \dots \alpha_{P_k}, \alpha_i) \in R$).
\end{definition}

\begin{definition} Высказывание $\alpha$ называется доказуемым, если 
существует доказательство $\alpha_1$, $\alpha_2$ \dots $\alpha_k$, и в нем
$\alpha_k$ совпадает с $\alpha$. 
\end{definition}

В качестве сокращения записи в языке исследователя мы будем писать $\vdash \alpha$,
чтобы сказать, что $\alpha$ доказуемо.

Расширим грамматику из предыдущего раздела:
\begin{bnf}\begin{eqnarray*}
\s{<выражение>}&::=&\s{<конъюнкция>} | \psi | \phi | \pi\\
\s{<конъюнкция>}&::=&\s{<дизъюнкция>} | \s{<дизъюнкция>} \rightarrow \s{<конъюнкция>}\\
\s{<дизъюнкция>}&::=&\s{<конъюнкция>} | \s{<дизъюнкция>} \vee \s{<конъюнкция>}\\
\s{<конъюнкция>}&::=&\s{<терм>} | \s{<конъюнкция>} \& \s{<терм>}\\
\s{<терм>}&::=&\s{<пропозициональная переменная>} | (\s{<выражение>})
\end{eqnarray*}\end{bnf}

Данная грамматика допускает дополнительные выражения, в которые входят буквы
греческого алфавита $\psi$, $\phi$ и $\pi$. Все такие выражения мы назовем
\emph{схемами выражений}: потому что если мы вместо \emph{всех} данных букв 
подставим корректные выражения, соответствующие исходной грамматике языка, мы получим 
корректное выражение, принадлежащее исходному языку. При этом замена должна 
происходить согласованно --- то есть, одинаковые буквы заменяются на одинаковые 
выражения. Все выражения, которые получены из схемы путем подстановки выражений вместо 
букв $\psi$, $\phi$ и $\pi$, мы назовем выражениями, \emph{порожденными} схемой.

\begin{definition}Исчисление высказываний --- формальная система, 
использующая в качестве языка язык исчисления высказываний из предыдущего
раздела, в качестве аксиом --- аксиомы, порожденные следующими схемами выражений
(в соответствии с расширенной грамматикой, указанной выше):

\begin{tabular}{ll}
(1) & $(\phi) \rightarrow ((\psi) \rightarrow (\phi))$ \\
(2) & $((\phi) \rightarrow (\psi)) \rightarrow ((\phi) \rightarrow (\psi) \rightarrow (\pi)) \rightarrow ((\phi) \rightarrow (\pi))$ \\
(3) & $(\phi) \rightarrow (\psi) \rightarrow (\phi) \& (\psi)$\\
(4) & $(\phi) \& (\psi) \rightarrow (\phi)$\\
(5) & $(\phi) \& (\psi) \rightarrow (\psi)$\\
(6) & $(\phi) \rightarrow (\phi) \vee (\psi)$\\
(7) & $(\psi) \rightarrow (\phi) \vee (\psi)$\\
(8) & $((\phi) \rightarrow (\pi)) \rightarrow ((\psi) \rightarrow (\pi)) \rightarrow ((\phi) \vee (\psi) \rightarrow (\pi))$\\
(9) & $((\phi) \rightarrow (\psi)) \rightarrow ((\phi) \rightarrow \neg (\psi)) \rightarrow \neg (\phi)$\\
(10) & $\neg \neg (\phi) \rightarrow (\phi)$
\end{tabular}

в качестве правил вывода --- все правила, порожденные согласованной 
заменой греческих букв в тройке схем выражений
$\langle{}\phi, (\phi) \rightarrow (\psi), \psi\rangle$.
\end{definition}

Традиционно правила вывода записывают так:
$$\infer{\psi}{\phi & (\phi) \rightarrow (\psi)}$$
